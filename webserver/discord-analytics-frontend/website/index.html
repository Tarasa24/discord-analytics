<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024">
    <link rel="icon" type="image/png" href="/media/DA_logo.png">
    <script src="/js/Chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/styles.css">
    <title>Discord Analytics</title>
</head>

<body>
    <div id="preloader">
        <div id="loader"></div>
    </div>

    <div id="sidenav" class="sidenav" style="display: none">
        <div class="dropdown">
            <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()" onfocus="myFunction()">
            <div id="myDropdown" class="dropdown-content"></div>
        </div>
        <table align="center" class="table table-dark" style="width: 95%" id="table_avatar"></table>
        <table align="center" class="table table-dark" style="width: 95%" id="table_name"></table>

        <div class="buttons" align="center">
            <a href="https://github.com/Tarasa24/discord-analytics" target="_blank"><button class="btn btn-primary" id="github-button">Github
                <i class="fa fa-github"></i></button></a>
            <a href="https://dht.chylex.com/" target="_blank"><button id="link-button" class="btn">DHT 
                <i class="fa fa-external-link-square"></i></button></a>
            <br>
            <b style="color: gray">Tarasa24 2019</b>
        </div>
    </div>

    <div align="center" id="main_body" style="display: none">
        <div class="container" align="center" style="padding-top: 20px; padding-bottom: 10px">
            <h2><a href="/">Discord Analytics</a></h2>
            <p style="color: white">For all of yours data-fetish needs...</p>
            <table id="form-group" class="table table-dark" style="width: 50%" align="center">
                <tr>
                    <td>
                        <div class="form-group">
                            <label for="sel1">Select server:</label>
                            <select class="form-control" id="select" onchange="insertParam()">
                            </select>
                        </div>
                    </td>
                </tr>
            </table>
            <table class="table table-dark" style="width: 50%" id="table"></table>
        </div>
        <script>
            function insertParam() {
                key = encodeURI("s");
                value = encodeURI($("#select option:selected").text());

                var kvp = document.location.search.substr(1).split('&');

                var i = kvp.length;
                var x;
                while (i--) {
                    x = kvp[i].split('=');

                    if (x[0] == key) {
                        x[1] = value;
                        kvp[i] = x.join('=');
                        break;
                    }
                }

                if (i < 0) {
                    kvp[kvp.length] = [key, value].join('=');
                }

                //this will reload the page
                document.location = "/?" + kvp.join('');
            }

            function myFunction() {
                document.getElementById("myDropdown").classList.toggle("show");
            }

            function filterFunction() {
                var input, filter, ul, li, a, i;
                input = document.getElementById("myInput");
                filter = input.value.toUpperCase();
                div = document.getElementById("myDropdown");
                a = div.getElementsByTagName("a");
                for (i = 0; i < a.length; i++) {
                    txtValue = a[i].textContent || a[i].innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        a[i].style.display = "";
                    } else {
                        a[i].style.display = "none";
                    }
                }
            }
        </script>

        <div class="container" align="center" style="color: white">
            <h3><a data-toggle="tooltip" title="First 50 most active users (messages wise)" id="tooltip">Messages per
                    user</a></h3>
            <canvas id="myChart" height="250%"></canvas>
            <h3><a data-toggle="tooltip" title="First 50 most active users (words wise)" id="tooltip">Words per user</a></h3>
            <canvas id="myChart1" height="250%"></canvas>
            <h3><a data-toggle="tooltip" title="First 50 most active channels" id="tooltip">Messages per Channel</a></h3>
            <canvas id="myChart2" height="200%"></canvas>
            <h3>Messages per Day</h3>
            <canvas id="myChart3"></canvas>
            <h3><a data-toggle="tooltip" title="Do you see how inconsitent the sleep/wake schedule of those users is?"
                    id="tooltip">Hourly rate of messages</a></h3>
            <canvas id="myChart4"></canvas>
            <h3>Word Frequency</h3>
            <canvas id="myChart5"></canvas>
            <h3><a data-toggle="tooltip" title="Sooo, how many times did somebody spam @everone?" id="tooltip">Mentions
                    per user</a></h3>
            <canvas id="myChart6" height="250%"></canvas>
        </div>
    </div>
</body>
<script src="/js/charts.js"></script>

</html>